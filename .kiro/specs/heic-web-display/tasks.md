# 実装計画

- [x] 1. 画像プロセッサに HEIC→JPEG 変換メソッドを追加

  - 既存の generate_thumbnail()メソッドを参考に convert_to_web_display_jpeg()メソッドを実装
  - 元画像サイズを維持して JPEG 品質 90 で変換する機能を作成
  - 変換エラーの適切なハンドリングを実装
  - _要件: 1.2, 1.3, 1.4, 4.3_

- [x] 2. ギャラリー UI で HEIC ファイル判定ロジックを実装

  - get_photo_original_url()関数でファイル拡張子による HEIC 判定を追加
  - HEIC ファイルの場合は変換処理を呼び出すロジックを実装
  - 変換された JPEG データを Streamlit で表示する処理を作成
  - _要件: 1.1, 1.2_

- [ ] 3. エラーハンドリングとフォールバック機能を実装

  - 変換失敗時にサムネイル表示にフォールバックする処理を追加
  - 適切なエラーメッセージ表示機能を実装
  - ファイル読み込み失敗時の汎用エラー状態表示を作成
  - _要件: 4.1, 4.4_

- [ ] 4. 単体テストを作成
  - HEIC to JPEG 変換機能のテストを作成
  - エラーハンドリングのテストを実装
  - ファイル形式判定ロジックのテストを作成
  - 品質設定とアスペクト比保持のテストを実装
  - _要件: 1.3, 1.4_
